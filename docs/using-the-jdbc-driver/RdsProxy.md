# Is Amazon RDS Proxy or Amazon Web Services JDBC Driver a better choice for me?

## Overview

The Amazon Web Services JDBC Driver is complementary to and extends the functionality of an existing JDBC driver to help
an application take advantage of the features of clustered databases such as Amazon Aurora.
The AWS JDBC Driver does not implement connectivity on its own to any database, but will enable support of AWS and
Aurora functionalities on top of an underlying JDBC driver of the user's choice.
The Amazon RDS Proxy is a fully managed, highly available database proxy for Amazon Relational Database Service (RDS).
Similar to the AWS Advanced JDBC Driver, Amazon RDS Proxy also supports failover and is able to route requests to new
database instances to reduce downtime.

In this documentation we discuss how to determine which option would better suit your workflows
by analyzing the major differences in cost, scalability, flexibility, configuration, and features.

## Comparison

| Topic         | AWS JDBC Driver                                                                                                                                                                                                                                                                                                                                                                                           | RDS Proxy                                                                                                                                                                                                                                                                                                                                                          |
|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Costs         | Free and open-sourced on [Github](https://github.com/awslabs/aws-advanced-jdbc-wrapper)                                                                                                                                                                                                                                                                                                                   | RDS Proxy is priced per vCPU or ACU per hour. RDS Proxy also requires using AWS Secrets Manager to                                                                                                                                                                                                                                                                 |
| Scalability   | The AWS JDBC Driver connects through user provided hostnames and does not have a limit on the number of opened connections.                                                                                                                                                                                                                                                                               | The RDS Proxy has a default quota of 20 proxies per region per AWS account. Users may request an increase in the quota.                                                                                                                                                                                                                                            |
| Flexibility   | If you already have a community JDBC driver fully integrated in your workflow, such as the PostgreSQL JDBC driver or the MySQL Connector/J. The AWS Advanced JDBC Driver allows customers to continue using their existing community drivers in addition to having the AWS JDBC Driver fully exploit failover behavior by maintaining a cache of the Aurora cluster topology and each DB instance's role. | The RDS Proxy provides an additional point of failure to the databases and can act as an additional layer of security between client applications and the underlying database. However the proxies require network connection and may introduce extra complexity during local or offline development.                                                              |
| Custom DNS    | The AWS JDBC Driver supports custom DNS by specifying the additional connection parameter `clusterInstanceHostPattern`.                                                                                                                                                                                                                                                                                   | The RDS Proxy does not support custom DNS.                                                                                                                                                                                                                                                                                                                         |
| Configuration | The AWS JDBC Driver allows you to fine tune the failover process with parameters like `failoverTimeoutMs` and `failoverReaderConnectTimeoutMs`. For more information on failover parameters, see the [FailoverConfigurationGuide](./FailoverConfigurationGuide.md).                                                                                                                                       | Each RDS Proxy handles connections to an RDS instance or an Aurora cluster. To enable failover for multiple clusters you would have to configure RDS Proxy for each cluster. While the RDS Proxy provides some configurations, such as the database authentication method, it does not offer the same level of failover configuration as the AWS JDBC Driver does. |

## Differences in Features

| Feature                        | AWS JDBC Driver                                                                              | RDS Proxy                                                                                                                                                                                                                                                                                                                                              |
|--------------------------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Authentication                 | Supports native authentication, IAM authentication, and AWS Secrets Manager                  | Supports native authentication, IAM authentication, and AWS Secrets Manager.                                                                                                                                                                                                                                                                           |
| Connection Pooling             | Requires third-party connection pools, such as HikariCP                                      | Supports third-party connection pooling but is also capable of handling the infrastructure to perform connection pooling for the writer instance of the associated RDS or Aurora database.                                                                                                                                                             |
| Failover Support               | Supports Aurora MySQL and PostgreSQL database engines                                        | Supports all Aurora database engines as well as the RDS database engines                                                                                                                                                                                                                                                                               |
| Transaction Boundary Detection | The AWS JDBC Driver uses keywords such as COMMIT or ROLLBACK in the SQL statements           | RDS Proxy detects when a transaction ends through the network protocol used by the database client application. For more information, see RDS Proxy's [Transactions page](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/rds-proxy.howitworks.html#rds-proxy-transactions).                                                                    |
| Security                       | he AWS JDBC Driver follows the same security mechanisms supported by the underlying drivers. | RDS Proxy supports TLS protocol version 1.0, 1.1, and 1.2 for sessions between your client and the RDS Proxy endpoint. To use SSL connections from the RDS Proxy to the database, [you need to set the SSL session variables on the client side](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/rds-proxy.howitworks.html#rds-proxy-security). |

## Additional FAQ

### Can the AWS RDS Proxy be used with Host Monitoring Connection Plugin

We recommend you either disable the Host Monitoring Connection Plugin or avoid using RDS Proxy endpoints when the Host
Monitoring Connection Plugin is active. For more information, see
the [Host Monitoring Connection Plugin documentation](https://github.com/awslabs/aws-advanced-jdbc-wrapper/wiki/UsingTheHostMonitoringPlugin#warning-warnings-about-usage-of-the-aws-advanced-jdbc-driver-with-rds-proxy).